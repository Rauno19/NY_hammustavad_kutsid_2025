#Instructions how to build Devcontainer and Superset

Installeeri Docker Desktop (https://www.docker.com/products/docker-desktop/), mille sees saab hakata kasutama isoleeritud keskkonnas konteinerit, milles töötada projektiga.
NB! Kui Docker on juba ennem olemas võib olla vajalik Dockeri uuendamine

1. Käivita Docker Desktop (peab jooksma taustal)

2. Loo uus Dockerfail kasutades skripti (käivita VS Code Terminalis): 
(juhendis kasutatud skript on natukene täiendatud kujul võetud Priit Adleri Github repositooriumist: 
https://github.com/adlerpriit/DECM_WS_Docker_ETL_AS/blob/main/superset_build/Dockerfile)


FROM apache/superset:master-py310 
# If using IOS with M1/M2/M3 chip use FROM apache/superset:master-py310-arm 
# Switching to root to install the required packages
USER root
# Example: installing the MySQL driver to connect to the metadata database
# if you prefer Postgres, you may want to use `psycopg2-binary` instead
RUN pip install duckdb==1.2.1 duckdb-engine==0.17.0
# Example: installing a driver to connect to Redshift
# Find which driver you need based on the analytics database
# you want to connect to here:
# https://superset.apache.org/installation.html#database-dependencies
# RUN pip install sqlalchemy-redshift
# Switching back to using the `superset` user
USER superset


3. Kui dockerfile on loodud tuleb hakata üles seadma Apache Superseti 
(käivita järgnevad käsud VS Code Terminalis directoris, kus asub dockerfail (mitte nt devcontaineri sees))

docker build -t minu-superset .   
# Ehitab Superseti nimega my-superset kasutades olemasolevat dockrefaili  
docker run -d -v ${PWD}:/data:rw -p 8080:8088 -e "SUPERSET_SECRET_KEY=sinu_salasona" --name superset minu-superset  
# Käivitab superseti konteineri nimega minu-superset  
# Suunab liikluse arvuti pordilt (vasakpoolne) 8088 kontrineri sees töötava Superseti pordile 8088.  
# Võib kasutada ka arvuti porti 8080
# -d käivitab konteineri taustal
# -v ${PWD}:/data:rw ${PWD} tuleb asendaa täieliku teekonnaga arvutis, kus hoitakse andmefaile Nt: -v /Users/yourname/superset_data:/data:rw failidele on antud käsuga :rw nii lugemis kui kirjutamisõigused

# "SUPERSET_SECRET_KEY=sinu_salasona" osa *sinu_salasona* asemel tuleb sisestada mingi unikaalne väärtus. 